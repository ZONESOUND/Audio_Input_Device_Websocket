{"version":3,"sources":["usages/colorUsage.js","sound sync //.(wav|m4a|aif)$","sound/Mixed_Fx_Sounds/90 Realm.wav","sound/Mixed_Fx_Sounds/91 Twisted.wav","sound/Mixed_Fx_Sounds/92 Ghosts.wav","sound/Noises/Analogue Hiss Lo Boost.aif","sound/Noises/Analogue Hiss Lo Cut.aif","sound/Noises/Analogue Hiss Mid Boost.aif","sound/Noises/Crackle Pops.aif","sound/Noises/Crunchy Crackle.aif","sound/Noises/Fake Vinyl 1.aif","sound/Noises/Fake Vinyl 2.aif","sound/Noises/FizzPop.aif","sound/Noises/FizzPopper2.aif","sound/S7_recordings/S7_1.m4a","sound/S7_recordings/S7_2.m4a","sound/S7_recordings/S7_3.m4a","sound/S7_recordings/S7_4.m4a","sound/iPad_FX_Samples/sample_1-1.wav","sound/iPad_FX_Samples/sample_1-2.wav","sound/iPad_FX_Samples/sample_1-3.wav","sound/iPad_FX_Samples/sample_1-4.wav","sound/iPad_FX_Samples/sample_1-5.wav","sound/iPad_FX_Samples/sample_2-1.wav","sound/iPad_FX_Samples/sample_2-2.wav","sound/iPad_FX_Samples/sample_2-3.wav","sound/iPad_FX_Samples/sample_2-4.wav","sound/iPad_FX_Samples/sample_2-5.wav","sound/iPad_FX_Samples/sample_3-1.wav","sound/iPad_FX_Samples/sample_3-2.wav","sound/iPad_FX_Samples/sample_3-3.wav","sound/iPad_FX_Samples/sample_3-4.wav","sound/iPad_FX_Samples/sample_3-5.wav","sound/iPad_FX_Samples/sample_4-1.wav","sound/iPad_FX_Samples/sample_4-2.wav","sound/iPad_FX_Samples/sample_4-3.wav","sound/iPad_FX_Samples/sample_4-4.wav","sound/iPad_FX_Samples/sample_4-5.wav","components/LandPage.js","usages/socketUsage.js","usages/tool.js","components/Fade.js","usages/config.js","usages/sketch.js","components/MicInput.js","usages/assetList.js","components/AnimeBox.js","usages/filter.js","components/ProgressBar.js","components/MusicBox.js","components/EffectBox.js","components/App.js","index.js"],"names":["module","exports","hsvToRgb","h","s","v","r","g","b","i","Math","floor","f","p","q","t","rgbToHsv","max","min","d","hslToRgb","l","hue2rgb","rgbToHsl","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","LandPage","defaultSocket","props","buttonTime","txt","useState","displayTxt","setDisplayTxt","index","setIndex","buttonAppear","setButtonAppear","callback","delay","savedCallback","useRef","useEffect","current","setInterval","clearInterval","useInterval","length","translateClass","setTranslateClass","select","mode","className","onClick","Fade","show","children","shouldRender","setRender","style","animation","onAnimationEnd","serverHost","defaultConnectFn","console","log","connectSocket","namespace","fn","socket","io","undefined","on","emitOSC","address","value","emit","args","sketch","analyser","bufferLength","frameCount","timeDataArray","freqDataArray","bgColor","drawCircleInner","mul","start","sliceDeg","cut","PI","deg","sum","total","j","x","sin","y","cos","curveVertex","vertex","endShape","setup","createCanvas","windowWidth","windowHeight","frameRate","windowResized","resizeCanvas","myCustomRedrawAccordingToNewPropsHandler","Uint8Array","fftSize","btnClick","draw","getByteFrequencyData","getByteTimeDomainData","background","freq","threshold","fftMax","indexOf","getFreq","maxDb","db","push","translate","stroke","fill","beginShape","CLOSE","noStroke","pop","drawCircle","textSize","textAlign","CENTER","text","MicInput","navigator","mediaDevices","getUserMedia","audio","then","micStart","micError","stream","setState","display","context","state","microphone","createMediaStreamSource","createAnalyser","connect","frequencyBinCount","dataArray","btnTxt","update","AudioContext","window","webkitAudioContext","timer","this","Component","useFiles","require","soundFiles","soundFileNum","forEach","filename","idx","soundFadeOut","soundFadeIn","rgbColors","AnimeBox","defaultProp","easing","loop","duration","direction","endDelay","nextProps","nextState","data","opacity","refresh","light","alpha","colorTemp","color","loopTime","colorStr","stiffness","bg","substring","split","config","damping","spring","parseFloat","a","motionFunc","rgbMotion","key","Date","now","hslMotion","lightProp","computeData","animeProp","assign","genRgbStyle","motion","anime","LowPassFilter","setAlpha","timestamp","OneEuroFilter","minCutOff","beta","dCutOff","dx","lasttime","cutOff","te","prevX","lastValue","edx","filter","abs","Filler","width","percentage","ProgressBar","soundPreload","meter","Tone","Meter","fft","Analyser","waveform","soundPlayer","entries","temp","Player","toMaster","MusicBox","loadFinish","buttonTxt","loading","clickButton","calcLoadingPercentage","loadPercentage","loaded","setTimeout","calculateEuro","nowOrder","euro","euroOut","soundInterval","waveData","getValue","apply","onChange","parent","Buffer","stopAll","playSound","volume","stop","order","genAlphaFromSound","inArrRange","num","len","genUUID","performance","uuid","replace","c","random","toString","sessionStorage","setItem","jsonCopy","jsonObj","JSON","parse","stringify","EffectBox","getItem","refreshAnime","refreshMusic","socketData","lightData","soundData","opa","socketConnectFn","socketID","receiveControlData","bind","setupBeforeUnloadListener","addEventListener","event","preventDefault","prevState","handleSocketData","sound","handleSoundData","handleLightData","orderTo","changeHandler","App","landing","setLanding","transmit","setTransmit","receive","setReceive","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.80eba061.chunk.js","sourcesContent":["/**\n * Converts an RGB color value to HSL. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n * Assumes r, g, and b are contained in the set [0, 255] and\n * returns h, s, and l in the set [0, 1].\n *\n * @param   Number  r       The red color value\n * @param   Number  g       The green color value\n * @param   Number  b       The blue color value\n * @return  Array           The HSL representation\n */\nfunction rgbToHsl(r, g, b) {\n  r /= 255;\n  g /= 255;\n  b /= 255;\n\n  var max = Math.max(r, g, b), min = Math.min(r, g, b);\n  var h, s, l = (max + min) / 2;\n\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n    switch (max) {\n      case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n      case g: h = (b - r) / d + 2; break;\n      case b: h = (r - g) / d + 4; break;\n    }\n\n    h /= 6;\n  }\n\n  return {h:h, s:s, l:l};\n}\n\n/**\n * Converts an HSL color value to RGB. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n * Assumes h, s, and l are contained in the set [0, 1] and\n * returns r, g, and b in the set [0, 255].\n *\n * @param   Number  h       The hue\n * @param   Number  s       The saturation\n * @param   Number  l       The lightness\n * @return  Array           The RGB representation\n */\nfunction hslToRgb(h, s, l) {\n  var r, g, b;\n\n  if (s == 0) {\n    r = g = b = l; // achromatic\n  } else {\n    function hue2rgb(p, q, t) {\n      if (t < 0) t += 1;\n      if (t > 1) t -= 1;\n      if (t < 1/6) return p + (q - p) * 6 * t;\n      if (t < 1/2) return q;\n      if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n      return p;\n    }\n\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n\n    r = hue2rgb(p, q, h + 1/3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1/3);\n  }\n\n  return {r:r * 255, g:g * 255, b:b * 255};\n}\n\n/**\n * Converts an RGB color value to HSV. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\n * Assumes r, g, and b are contained in the set [0, 255] and\n * returns h, s, and v in the set [0, 1].\n *\n * @param   Number  r       The red color value\n * @param   Number  g       The green color value\n * @param   Number  b       The blue color value\n * @return  Array           The HSV representation\n */\nfunction rgbToHsv(r, g, b) {\n  r /= 255;\n  g /= 255;\n  b /= 255;\n\n  var max = Math.max(r, g, b), min = Math.min(r, g, b);\n  var h, s, v = max;\n\n  var d = max - min;\n  s = max == 0 ? 0 : d / max;\n\n  if (max == min) {\n    h = 0; // achromatic\n  } else {\n    switch (max) {\n      case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n      case g: h = (b - r) / d + 2; break;\n      case b: h = (r - g) / d + 4; break;\n    }\n\n    h /= 6;\n  }\n\n  return { h:h, s:s, v:v };\n}\n\n/**\n * Converts an HSV color value to RGB. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\n * Assumes h, s, and v are contained in the set [0, 1] and\n * returns r, g, and b in the set [0, 255].\n *\n * @param   Number  h       The hue\n * @param   Number  s       The saturation\n * @param   Number  v       The value\n * @return  Array           The RGB representation\n */\nfunction hsvToRgb(h, s, v) {\n  var r, g, b;\n\n  var i = Math.floor(h * 6);\n  var f = h * 6 - i;\n  var p = v * (1 - s);\n  var q = v * (1 - f * s);\n  var t = v * (1 - (1 - f) * s);\n\n  switch (i % 6) {\n    case 0: \n      r = v;\n      g = t;\n      b = p;\n      break;\n    case 1: \n      r = q;\n      g = v;\n      b = p; \n      break;\n    case 2: \n      r = p;\n      g = v;\n      b = t; \n      break;\n    case 3: \n      r = p;\n      g = q;\n      b = v; \n      break;\n    case 4: \n      r = t; \n      g = p;\n      b = v; \n      break;\n    case 5: \n      r = v;\n      g = p;\n      b = q; \n      break;\n    default:\n      break;\n  }\n\n  return {r:r * 255, g:g * 255, b:b * 255};\n}\n\nmodule.exports.hsvToRgb = hsvToRgb;\nmodule.exports.rgbToHsv = rgbToHsv;\nmodule.exports.hslToRgb = hslToRgb;\nmodule.exports.rgbToHsl = rgbToHsl;\n","var map = {\n\t\"./Mixed_Fx_Sounds/90 Realm.wav\": 90,\n\t\"./Mixed_Fx_Sounds/91 Twisted.wav\": 91,\n\t\"./Mixed_Fx_Sounds/92 Ghosts.wav\": 92,\n\t\"./Noises/Analogue Hiss Lo Boost.aif\": 93,\n\t\"./Noises/Analogue Hiss Lo Cut.aif\": 94,\n\t\"./Noises/Analogue Hiss Mid Boost.aif\": 95,\n\t\"./Noises/Crackle Pops.aif\": 96,\n\t\"./Noises/Crunchy Crackle.aif\": 97,\n\t\"./Noises/Fake Vinyl 1.aif\": 98,\n\t\"./Noises/Fake Vinyl 2.aif\": 99,\n\t\"./Noises/FizzPop.aif\": 100,\n\t\"./Noises/FizzPopper2.aif\": 101,\n\t\"./S7_recordings/S7_1.m4a\": 102,\n\t\"./S7_recordings/S7_2.m4a\": 103,\n\t\"./S7_recordings/S7_3.m4a\": 104,\n\t\"./S7_recordings/S7_4.m4a\": 105,\n\t\"./iPad_FX_Samples/sample_1-1.wav\": 106,\n\t\"./iPad_FX_Samples/sample_1-2.wav\": 107,\n\t\"./iPad_FX_Samples/sample_1-3.wav\": 108,\n\t\"./iPad_FX_Samples/sample_1-4.wav\": 109,\n\t\"./iPad_FX_Samples/sample_1-5.wav\": 110,\n\t\"./iPad_FX_Samples/sample_2-1.wav\": 111,\n\t\"./iPad_FX_Samples/sample_2-2.wav\": 112,\n\t\"./iPad_FX_Samples/sample_2-3.wav\": 113,\n\t\"./iPad_FX_Samples/sample_2-4.wav\": 114,\n\t\"./iPad_FX_Samples/sample_2-5.wav\": 115,\n\t\"./iPad_FX_Samples/sample_3-1.wav\": 116,\n\t\"./iPad_FX_Samples/sample_3-2.wav\": 117,\n\t\"./iPad_FX_Samples/sample_3-3.wav\": 118,\n\t\"./iPad_FX_Samples/sample_3-4.wav\": 119,\n\t\"./iPad_FX_Samples/sample_3-5.wav\": 120,\n\t\"./iPad_FX_Samples/sample_4-1.wav\": 121,\n\t\"./iPad_FX_Samples/sample_4-2.wav\": 122,\n\t\"./iPad_FX_Samples/sample_4-3.wav\": 123,\n\t\"./iPad_FX_Samples/sample_4-4.wav\": 124,\n\t\"./iPad_FX_Samples/sample_4-5.wav\": 125\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 89;","module.exports = __webpack_public_path__ + \"static/media/90 Realm.aaa23448.wav\";","module.exports = __webpack_public_path__ + \"static/media/91 Twisted.5106b983.wav\";","module.exports = __webpack_public_path__ + \"static/media/92 Ghosts.197f0c90.wav\";","module.exports = __webpack_public_path__ + \"static/media/Analogue Hiss Lo Boost.332e560a.aif\";","module.exports = __webpack_public_path__ + \"static/media/Analogue Hiss Lo Cut.952afa17.aif\";","module.exports = __webpack_public_path__ + \"static/media/Analogue Hiss Mid Boost.4cd487d1.aif\";","module.exports = __webpack_public_path__ + \"static/media/Crackle Pops.c7977529.aif\";","module.exports = __webpack_public_path__ + \"static/media/Crunchy Crackle.5bf5313e.aif\";","module.exports = __webpack_public_path__ + \"static/media/Fake Vinyl 1.d7b01358.aif\";","module.exports = __webpack_public_path__ + \"static/media/Fake Vinyl 2.253f0fd1.aif\";","module.exports = __webpack_public_path__ + \"static/media/FizzPop.bbb2cfde.aif\";","module.exports = __webpack_public_path__ + \"static/media/FizzPopper2.0079c45c.aif\";","module.exports = __webpack_public_path__ + \"static/media/S7_1.f320a9ac.m4a\";","module.exports = __webpack_public_path__ + \"static/media/S7_2.cfd2f9df.m4a\";","module.exports = __webpack_public_path__ + \"static/media/S7_3.3143dd66.m4a\";","module.exports = __webpack_public_path__ + \"static/media/S7_4.4e939f3c.m4a\";","module.exports = __webpack_public_path__ + \"static/media/sample_1-1.8e6341be.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_1-2.6c60e8c3.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_1-3.e15b3f63.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_1-4.01880ee2.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_1-5.07b7069b.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_2-1.e1be8bc7.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_2-2.2f9c9e15.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_2-3.9b5e44f6.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_2-4.1fb6d5e0.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_2-5.d0cf3356.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_3-1.84339a05.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_3-2.908333bc.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_3-3.1e96fc54.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_3-4.a305e468.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_3-5.7fcb4950.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_4-1.61dd2193.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_4-2.20c20d96.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_4-3.291c8085.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_4-4.06a7ff8b.wav\";","module.exports = __webpack_public_path__ + \"static/media/sample_4-5.9da318bd.wav\";","import React, {useState, useEffect} from 'react';\nimport {useInterval} from '../usages/tool';\nimport '../css/LandPage.css';\n//import sketch from '../usages/landPageSketch'\n\nfunction LandPage(props) {\n    const buttonTime = [0, 8];\n    const txt = 'Which one do you want to be? ';\n    const [displayTxt, setDisplayTxt] = useState('');\n    const [index, setIndex] = useState(0);\n    const [buttonAppear, setButtonAppear] = useState(0);\n    useInterval(() => {\n        if (index >= txt.length) {\n            if (buttonAppear === -1) return;\n            setButtonAppear(buttonAppear+1);\n            return;\n        }\n        setDisplayTxt(displayTxt+txt[index]);\n        setIndex(index+1);\n    }, 120);\n    const [translateClass, setTranslateClass] = useState(''); \n    \n    useEffect(()=> {\n\n        if (buttonAppear > buttonTime[0]) setTranslateClass('translate');\n        if (buttonAppear > buttonTime[1]) setTranslateClass('translate2');\n    })\n    // let getPos = useRef((el)=> {\n    //     console.log(el.getBoundingClientRect());\n    // });\n    let select = (mode) => {\n        //setButtonAppear(-1);\n        props.select(mode);\n    }\n\n    return (\n        <div id='LandpageWrapper' className={translateClass}>\n            <div id='LandpageTxt'>\n                {displayTxt}\n            </div>\n            {buttonAppear>buttonTime[0] && \n                <button className='selectBtn' onClick={()=>{select(0)}}>Transmitter</button>}\n            {buttonAppear>buttonTime[1] && \n                <button className='selectBtn' onClick={()=>{select(1)}}>Receiver</button>}\n        </div>\n    );\n}\n\n// refs={ el => \n//     this.setState( state => ({\n//       pos: {\n//         ...state.pos, \n//         [el.name]: el.getBoundingClientRect()\n//     }))\n//   }\n// class LandPage extends Component {\n\n//     constructor() {\n//         super();\n//         this.state = {\n//             displayTxt: '',\n//             allTxt: 'Which one do you want to be ?',\n//         }\n//     }\n\n//     componentDidMount() {\n//         if (!window.requestAnimationFrame) { \n//             requestAnimationFrame = function(fn) { \n//                 setTimeout(fn, 17); \n//             }; \n//         }\n//         requestAnimationFrame();\n//     }\n\n//     typing = () => {\n//         count++;\n//     }\n\n//     render() {\n//         return (\n//             <div>\n//                 <div>\n//                     {this.state.displayTxt}\n//                 </div>\n//                 <button></button>\n//                 <button></button>\n//             </div>\n//         );\n//     }\n// }\nexport default LandPage;","import io from 'socket.io-client'\nimport {serverHost} from './config'\n\nlet defaultSocket;\nlet isSocketConnect = false;\n\nlet defaultConnectFn = () => {\n    isSocketConnect = true;\n    console.log('socket connect to server');\n}\n\n/**\n * set default socket for later use.\n *\n * @param   Socket  socket\n */\nexport let setDefaultSocket = (socket)=> {\n    defaultSocket = socket;\n}\n\n/**\n * connect socket with namespace, execute fn function after connect.\n *\n * @param   String  namespace     The namespace of socket io\n * @param   Function  fn          The function to be execute after connection\n * @return  Socket                The willing connect socket;\n */\nexport let connectSocket = (namespace='', fn=defaultConnectFn)=> {\n\n    let socket = io(serverHost+namespace);\n    if (defaultSocket === undefined) defaultSocket = socket;\n    socket.on('connect', fn);\n    return socket;\n}\n\n/**\n * Emit Socket with name 'osc'\n *\n * @param   String  address     The specified address string\n * @param   Json  value         The values in JSON format\n */\nexport let emitOSC = (address, value, socket=defaultSocket)=> {\n    socket.emit('osc', {\n        address: address,\n        args: [value]\n    });\n}\n\n/**\n * Emit Socket with name and data\n *\n * @param   String  name     The name for socket emit\n * @param   Json  data       The emit data in JSON format\n */\nexport let emitData = (name, data, socket=defaultSocket)=> {\n    socket.emit(name, data);\n}\n\nexport {isSocketConnect};","import { useEffect, useRef } from 'react';\n\nexport function useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  });\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}","import React, { useEffect, useState } from \"react\";\n\nconst Fade = ({ show, children }) => {\n  const [shouldRender, setRender] = useState(show);\n\n  useEffect(() => {\n    if (show) setRender(true);\n  }, [show]);\n\n  const onAnimationEnd = () => {\n    if (!show) setRender(false);\n  };\n\n  return (\n    shouldRender && (\n      <div\n        style={{ animation: `${show ? \"fadeIn\" : \"fadeOut\"} 0.5s` }}\n        onAnimationEnd={onAnimationEnd}\n      >\n        {children}\n      </div>\n    )\n  );\n};\n\nexport default Fade;","export const serverHost = \"https://stage-effect-server1.herokuapp.com\";\n","import { emitOSC } from \"./socketUsage\";\n\nexport default function sketch (p) {\n    let analyser;\n    let frameCount = 0;\n    let timeDataArray = [];\n    let freqDataArray = [];\n    let btnClick;\n    let button;\n    let bufferLength;\n    let bgColor = [0, 0, 0];\n\n    p.setup = () => {\n        p.createCanvas(p.windowWidth, p.windowHeight);\n        p.frameRate(30);\n    };\n\n    p.windowResized = () =>  {\n        p.resizeCanvas(p.windowWidth, p.windowHeight);\n    }\n\n    p.myCustomRedrawAccordingToNewPropsHandler = (props) => {\n        \n        if (props.bufferLength) {\n            bufferLength = props.bufferLength;\n        }\n        if (props.analyser) {\n            if (props.analyser == null) return;\n            analyser = props.analyser;\n            timeDataArray = new Uint8Array(analyser.fftSize);\n            freqDataArray = new Uint8Array(analyser.fftSize);\n        }\n        if (props.btnClick) {\n            btnClick = props.btnClick;\n            \n            if (button) button.mousePressed(btnClick);\n        }\n    };\n\n    p.draw = function () {\n        frameCount++;\n\n        if (analyser !== undefined) {\n            getAnalysedData();\n            getTimeDomainData();\n        }\n\n        p.background(bgColor[0], bgColor[1], bgColor[2], 50);\n        if (timeDataArray.length <= 0) return;\n        \n        var ths = 50;\n        var freq = getFreq(ths);\n        var maxDb = Math.max(...freqDataArray)/256.;\n        \n        \n        if (maxDb > ths/255. && frameCount % 10 === 0) {\n            emitOSC('/sound', {f: freq, d: maxDb});\n        }\n        \n        //drawTimeWave();\n        drawCircle(maxDb, freq);\n\n        p.textSize(15);\n        p.fill(200);\n        p.textAlign(p.CENTER);\n        p.text('MAKE SOUND', p.windowWidth/2, p.windowHeight - 50);\n        \n    };\n\n    function drawCircle(db, freq) {\n        p.push()\n        p.translate(p.windowWidth / 2, p.windowHeight / 2);\n        \n        let mul = p.map(db, 0, 1, 40, 50);\n        let r = p.map(db, 0, 1, 30, 70);\n\n        // p.stroke(50);\n        // p.beginShape(p.TRIANGLE_STRIP);\n        // drawCircleInner(r, mul, 0, true);\n        // p.endShape();\n\n        let h = Math.floor(p.map(freq, 100, 2000, 0, 360, true));\n        let s = Math.floor(p.map(db, 0.2, 1, 0, 50, true));\n        console.log(h, s);\n        p.stroke(`hsl(${h}, ${s}%, 50%)`);\n        //p.stroke(255);\n\n        p.fill(bgColor[0], bgColor[1], bgColor[2]);\n        p.beginShape();\n        drawCircleInner(r, mul);\n        p.endShape(p.CLOSE);\n\n        //p.fill(255,255,255,100);\n        p.fill(`hsla(${h}, ${s}%, 90%, 0.5)`)\n        for (let i=0; i<30; i++) {\n            p.noStroke();\n            p.beginShape();\n            drawCircleInner(r-4-i*2, mul);\n            p.endShape(p.CLOSE);\n            //p.fill(`hsla(${h}, 100%, 50%, 0.05)`)\n            //p.fill(0,0,0,10);\n            p.fill(bgColor[0], bgColor[1], bgColor[2], 10);\n        }\n        \n        p.pop()\n    }\n\n    function drawCircleInner(r, mul) {\n\n        let cut = 16;\n        let sliceDeg = cut*2*Math.PI / bufferLength;\n        let deg = 0;\n        let start;\n        for (let i=0; i<bufferLength; i+=cut) {\n            let sum = 0;\n            let total = 0;\n            for (let j=i; j<i+cut && j<bufferLength; j++) {\n                sum += timeDataArray[j];\n                total ++;\n            }\n            sum /= total;\n            let v = (sum / 128.0)*mul;\n            let x = (r+v) * Math.sin(deg);\n            let y = (r+v) * Math.cos(deg);\n            // let x1 = (r+dis+v) * Math.sin(deg);\n            // let y1 = (r+dis+v) * Math.cos(deg);\n            // p.push()\n            //     p.noStroke();\n            //     p.fill(255,255,255,100);\n            //     p.ellipse(x,y,5);\n            // p.pop()\n            //p.curveVertex(x, y);\n            \n            //let h = Math.floor(360*deg/(2*Math.PI));\n            //let s = p.map(sum, 0, 256, 0, 30);\n            //if (tri) p.stroke(`hsl(${h}, 20%, 50%)`);\n            p.curveVertex(x, y);\n            //if (tri) p.vertex(x1, y1);\n            if (i === 0) {\n                //start = [x, y, x1, y1];\n                start = [x, y];\n            }\n\n            deg += sliceDeg;\n        }\n        p.vertex(start[0], start[1]);\n        //if (tri) p.vertex(start[2], start[3]);\n        //p.endShape(p.CLOSE)\n        p.endShape()\n    }\n\n    function drawTimeWave() {\n        p.stroke(126);\n        p.fill(0);\n\n        let sliceWidth = p.windowWidth * 1.0 / bufferLength;\n        let x = 0;\n        let prev;\n        for(var i = 0; i < bufferLength; i++) {\n    \n            var v = timeDataArray[i] / 128.0;\n            var y = v * p.windowHeight/2;\n\n            if(i !== 0) {\n                p.line(prev[0], prev[1], x, y);\n            }\n            prev = [x, y];\n\n            x += sliceWidth;\n        }\n        p.line(prev[0], prev[1], p.windowWidth, p.windowHeight/2);\n    }\n\n    function getAnalysedData() {\n        //console.log(\"getAnalysedData\");\n        analyser.getByteFrequencyData(freqDataArray);\n        //console.log(freqDataArray);\n    }\n\n    function getTimeDomainData() {\n        analyser.getByteTimeDomainData(timeDataArray);\n        //console.log(timeDataArray);\n    }\n\n    function getFreq(threshold) {\n        var fs = 44100;\n        // var N = freqDataArray.frequencyBinCount;\n        //console.log(fs, N);\n        var max = Math.max(...freqDataArray);\n        var fftMax = freqDataArray.indexOf(max) * fs / (2*bufferLength);\n        return max > threshold ? Math.floor(fftMax) : 0;\n    }\n};\n\n","import React, {Component}  from 'react';\nimport P5Wrapper from 'react-p5-wrapper';\nimport sketch from '../usages/sketch';\nimport {connectSocket} from '../usages/socketUsage';\n\nclass MicInput extends Component {\n\n  constructor() {\n    super();\n    var AudioContext = window.AudioContext // Default\n          || window.webkitAudioContext // Safari and old versions of Chrome\n          || false; \n\n    this.state = {\n      timer: null,\n      style: {},\n      btnTxt: 'START',\n      context: AudioContext? new AudioContext() : null,\n    }\n    \n  }\n\n  btnClick = () => {\n    navigator.mediaDevices.getUserMedia({audio: true})\n        .then(this.micStart, this.micError);\n  }\n\n  micStart = (stream) => {\n\n    this.setState({style:{display:'none'}});\n    let {context} = this.state;\n    var microphone = context.createMediaStreamSource(stream);\n    var analyser = context.createAnalyser();\n    microphone.connect(analyser);\n    //analyser.connect(context.destination);\n    analyser.fftSize = 2048;\n    var bufferLength = analyser.frequencyBinCount;\n    var dataArray = new Uint8Array(analyser.fftSize);\n\n    this.setState ({\n      analyser : analyser,\n      dataArray: dataArray,\n      bufferLength: bufferLength,\n      \n    });\n    //this.update();\n  }\n\n  micError = () => {\n      //TODO: if not enable mic....\n    this.setState({btnTxt:'RE-EANBLE!'});\n    console.log('error');\n  }\n\n  update = () => {\n    let {dataArray, analyser} = this.state;\n    console.log(dataArray);\n    analyser.getByteFrequencyData(dataArray);\n    //this.setState({timer:setTimeout(this.update,200)});\n  }\n\n  componentDidMount() {\n      this.btnClick();\n      //TODO: save socket!\n      connectSocket('/user');\n  }\n\n  render() {\n\n    return (\n      <div>\n        {/* <div id=\"wrap\" style={this.state.style}>\n          <button onClick={this.btnClick}>{this.state.btnTxt}</button>\n        </div> */}\n        <P5Wrapper sketch={sketch} analyser={this.state.analyser} \n           bufferLength={this.state.bufferLength}/>\n      </div>\n    );\n  }\n}\n\nexport default MicInput;","let useFiles = [\n    \"./iPad_FX_Samples/sample_1-1.wav\",\n    \"./iPad_FX_Samples/sample_1-2.wav\",\n    \"./iPad_FX_Samples/sample_1-3.wav\",\n    \"./iPad_FX_Samples/sample_1-4.wav\",\n    \"./iPad_FX_Samples/sample_1-5.wav\",\n    \"./iPad_FX_Samples/sample_2-1.wav\",\n    \"./iPad_FX_Samples/sample_2-2.wav\",\n    \"./iPad_FX_Samples/sample_2-3.wav\",\n    \"./iPad_FX_Samples/sample_2-4.wav\",\n    \"./iPad_FX_Samples/sample_2-5.wav\",\n    \"./Noises/Analogue Hiss Mid Boost.aif\", //25 -> 10\n    \"./Noises/Crackle Pops.aif\",\n    \"./Noises/Crunchy Crackle.aif\",\n    \"./S7_recordings/S7_1.m4a\", //32 v -> 13\n    \"./S7_recordings/S7_2.m4a\", \n    \"./S7_recordings/S7_3.m4a\",\n    \"./S7_recordings/S7_4.m4a\",\n    ];\n\nlet context = require.context('../sound/', true, /\\.(wav|m4a|aif)$/);\nlet soundFiles={};\nlet soundFileNum=useFiles.length;\n\ncontext.keys().forEach((filename)=>{\n    let idx = useFiles.indexOf(filename);\n    if (idx !== -1) {\n        soundFiles[idx] = context(filename);\n    }\n});\n\nexport {soundFiles, soundFileNum};\n\n\nexport let soundFadeOut = [\n0,0,0,0,0,\n0,0,0,0,0,\n10,10,10,\n10,10,10,10\n]\n\nexport let soundFadeIn = [\n0,0,0,0,0,\n0,0,0,0,0,\n0,0,0,\n10,10,10,10\n]\n\n/*\n\"./iPad_FX_Samples/sample_3-1.wav\", //3,4 x\n\"./iPad_FX_Samples/sample_3-2.wav\",\n\"./iPad_FX_Samples/sample_3-3.wav\",\n\"./iPad_FX_Samples/sample_3-4.wav\",\n\"./iPad_FX_Samples/sample_3-5.wav\",\n\"./iPad_FX_Samples/sample_4-1.wav\",\n\"./iPad_FX_Samples/sample_4-2.wav\",\n\"./iPad_FX_Samples/sample_4-3.wav\",\n\"./iPad_FX_Samples/sample_4-4.wav\",\n\"./iPad_FX_Samples/sample_4-5.wav\", //19\n\"./Mixed_Fx_Sounds/90 Realm.wav\",  //20 x\n\"./Mixed_Fx_Sounds/91 Twisted.wav\",\n\"./Mixed_Fx_Sounds/92 Ghosts.wav\",\n\"./Noises/Analogue Hiss Lo Boost.aif\",\n\"./Noises/Analogue Hiss Lo Cut.aif\",\n\n\"./Noises/Fake Vinyl 1.aif\", //28 x\n\"./Noises/Fake Vinyl 2.aif\",\n\"./Noises/FizzPop.aif\",\n\"./Noises/FizzPopper2.aif\",\n*/\n\nexport let rgbColors = [\n\"255, 255, 255\", //white\n\"255, 255, 255\", //white\n\"255, 0, 0\",\t// r\n\"0, 255, 0\",\t// g\n\"0, 0, 255\", \t// b\n//2\n\"0, 253, 255\",  //c\n\"255, 0, 0\",\t//r\n\"255,251,0\",\t//y\n\"150,0,150\", \t//purple\n\"0, 255, 0\",\t//g\n//3\n\"255,191,0\",\t//yellow\n\"255,64,255\",\t//m\n];\n","import React, {Component} from \"react\";\nimport Anime from \"react-anime\";\nimport { Motion, spring, presets} from \"react-motion\";\nimport {rgbToHsl, hslToRgb} from \"../usages/colorUsage\";\nimport '../css/AnimeBox.css';\n\nclass AnimeBox extends Component {\n\n\tstate = {\n\t\tdefaultProp : {\n\t\t\teasing: \"easeInOutQuad\",\n\t\t\tloop: 2,\n\t\t\tduration: 500,\n\t\t\tdirection: \"alternate\",\n\t\t\tdelay: 0,\n\t\t\tendDelay: 0,\n\t\t\tbackground: \"rgba(0,0,0,1)\"\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps, nextState) {\n\t\t// only render when refresh animation\n\t\t// if (\"mode\" in nextProps.data){\n\t\t// \tif (nextProps.data.mode == \"follow\" \n\t\t// \t\t\n\t\t// }\n\t\tif (nextProps.data.mode == \"follow\"\n\t\t\t&& nextProps.opacity != this.props.opacity) {\n\n\t\t\treturn true;\n\t\t}\n\t\treturn (nextProps.refresh !== this.props.refresh);\n\t}\n\n\tcomputeData(light) {\n\t\t//TODO: check if QQ?\n\t\t//TODO: if first time is follw: QQ?\n\n\t\tlet alpha = 0;\n\t\t//console.log(`<background ?> ${JSON.stringify(light)}`);\n\t\tif (\"color\" in light) {\n\t\t\tlight.colorTemp = light.color;\n\t\t}\n\t\tif (\"alpha\" in light) {\n\t\t\talpha = light.alpha;\n\t\t} \n\t\tif (light.mode == \"follow\"){\n\t\t\talpha = this.props.opacity;\n\t\t}\n\n\t\tif (!(\"background\" in light)) {\n\t\t\tlight.direction = light.mode == \"blink\" ? \"alternate\" : \"normal\";\n\t\t\tlight.loop = light.mode == \"light\" ? light.loopTime : light.loopTime*2;\n\t\t}\n\t\tlight.background = `rgba(${light.colorTemp},${alpha})`;\n\t\t//console.log(light.background);\n\t\t//TODO: if mode == follow\n\n\t\t//delete light.mode;\n\t\tdelete light.loopTime;\n\t\tdelete light.color;\n\t\tdelete light.alpha;\n\t\t\n\t\treturn light;\n\t}\n\n\tgenRgbStyle(colorStr, stiffness) {\n\t\tlet bg = colorStr;\n\t  \tlet bgColor = bg.substring(5, bg.length-1).split(\",\");\n\t  \tconst config = {stiffness: stiffness, damping: 30}; // 70, 20\n\t  \treturn {\n\t  \t\tstyle: {\n\t\t  \t\tr: spring(parseFloat(bgColor[0]),config),\n\t\t  \t\tg: spring(parseFloat(bgColor[1]),config),\n\t\t  \t\tb: spring(parseFloat(bgColor[2]),config),\n\t\t  \t\ta: spring(parseFloat(bgColor[3]),config),\n\t\t  \t}, \n\t\t  \tmotionFunc: this.rgbMotion\n\t\t  }\n\t  \t\n\t}\n\n\trgbMotion({r, g, b, a}) {\n    \t//console.log(r,g,b,a);\n        return (\n        \t<div id=\"lightBox\" key={Date.now()}\n\t          style={{\n\t            background:`rgba(${Math.floor(r)},${Math.floor(g)},${Math.floor(b)},${a})`\n\t          }}>\n          </div>);\n    }\n\n\tgenHslStyle(colorStr) {\n\t\tlet bg = colorStr;\n\t  \tlet bgColor = bg.substring(5, bg.length-1).split(\",\");\n\t  \tconst config = {stiffness: 80, damping: 20};\n\t\tlet {h,s,l} = rgbToHsl(parseFloat(bgColor[0]), parseFloat(bgColor[1]), parseFloat(bgColor[2]));\n\t  \treturn {\n\t  \t\tstyle: {\n\t\t  \t\th: spring(h,config),\n\t\t  \t\ts: spring(s,config),\n\t\t  \t\tl: spring(l,config),\n\t\t  \t\ta: spring(parseFloat(bgColor[3]),config),\n\t\t  \t},\n\t\t  \tmotionFunc: this.hslMotion\n\t\t}\n\t  \t//console.log(hslStyle);\n\t}\n\n\thslMotion({h, s, l, a}) {\n    \t//console.log(h,s,l,a);\n        return (\n        \t<div id=\"lightBox\" key={Date.now()}\n\t       \n\t          style={{\n\t            background:`hsla(${h*360},${s*100}%,${l*100}%,${a})`\n\t          }}>\n          </div>);\n    }\n\n\trender () {\n\t\t//console.log(`<render> animBOX`);\n\t\tlet {defaultProp} = this.state;\n\t\t\n\t\tlet lightProp = this.computeData(this.props.data);\n\t\tlet animeProp = Object.assign(defaultProp, lightProp);\n\t\t//console.log(`<render animebox> ${JSON.stringify(animeProp)}`);\n\t\t\n\t\t//TODO: change rgb type\n\t\t//animeProp.background\n\t\tlet {style, motionFunc} = this.genRgbStyle(animeProp.background, animeProp.duration);\n\t\t//let {style, motionFunc} = this.genHslStyle(this.props.opa);\n\t\t//console.log(animeProp.duration);\n\t  \tlet motion = (\n\t  \t\t<Motion style={style}>\n\t  \t\t\t{motionFunc}\n        \t</Motion>);\n\t  \t\n\t  \tlet anime = (\n\t\t\t<Anime key={Date.now()} {...animeProp}>\n\t\t        <div id=\"lightBox\"></div>\n      \t\t</Anime>);\n\n\t  \t//return motion;\n\t  \t//console.log(animeProp.mode == \"blink\"? \"anime\" : \"motion\")\n\t  \treturn animeProp.mode == \"blink\"? anime : motion;\n\t  \t\t\n\t}\n\n}\n\nconst colorInterpolate = (startValue, endValue, percentage) => {\n\treturn (endValue - startValue) * percentage + startValue;\n}\n\nexport default AnimeBox;","class LowPassFilter {\n  constructor(alpha) {\n    this.setAlpha(alpha);\n    this.y = null;\n    this.s = null;\n  }\n  \n  setAlpha(alpha) {\n    if (alpha <= 0 || alpha > 1.0) {\n      throw new Error();\n    }\n    this.alpha = alpha;\n  }\n  \n  filter(value, timestamp, alpha) {\n    if (alpha) {\n      this.setAlpha(alpha);\n    }\n    let s;\n    if (!this.y) {\n      s = value;\n    } else {\n      s = this.alpha * value + ( 1.0 - this.alpha ) * this.s;\n    }\n    this.y = value;\n    this.s = s;\n    return s;\n  }\n  \n  lastValue() {\n    return this.y;\n  }\n}\n\nexport class OneEuroFilter {\n  constructor(freq, minCutOff=1.0, beta=0.0, dCutOff=1.0) {\n    if (freq <= 0 || minCutOff <= 0 || dCutOff <= 0) {\n      throw new Error();\n    }\n    this.freq = freq;\n    this.minCutOff = minCutOff;\n    this.beta = beta;\n    this.dCutOff = dCutOff;\n    this.x = new LowPassFilter(this.alpha(this.minCutOff));\n    this.dx = new LowPassFilter(this.alpha(this.dCutOff));\n    this.lasttime = null;\n  }\n  \n  alpha(cutOff) {\n    const te = 1.0 / this.freq;\n    const tau = 1.0 / ( 2 * Math.PI * cutOff );\n    return 1.0 / ( 1.0 + tau / te );\n  }\n  \n  filter(x, timestamp=null) {\n    if (this.lasttime && timestamp) {\n      this.freq = 1.0 / ( timestamp - this.lasttime );\n    }\n    this.lasttime = timestamp;\n    const prevX = this.x.lastValue();\n    const dx = (!prevX) ? 0.0 : ( x - prevX ) * this.freq;\n    const edx = this.dx.filter(dx, timestamp, this.alpha(this.dCutOff));\n    const cutOff = this.minCutOff + this.beta * Math.abs(edx);\n    return this.x.filter(x, timestamp, this.alpha(cutOff));\n  }\n}","import React from 'react';\nimport '../css/ProgressBar.css'\n\nfunction ProgressBar(props) {\n\n    return (<div className=\"progressBar\">\n        <Filler percentage={props.percentage}/>\n    </div>);\n\n}\n\nfunction Filler(props) {\n    let style = {width: `${props.percentage}%`}\n    return (<div className=\"filler\" style={style}></div>);\n}\n\nexport default ProgressBar;","import React, {Component} from 'react';\nimport Tone from 'tone';\nimport {OneEuroFilter} from '../usages/filter.js';\nimport {soundFiles, soundFadeOut, soundFadeIn, soundFileNum} from '../usages/assetList';\nimport Fade from './Fade';\nimport ProgressBar from './ProgressBar';\nimport '../css/MusicBox.css'\n\nconst soundPreload = () => {\n\tconsole.log('soundPreload');\n\tvar meter = new Tone.Meter('level');\n\tvar fft = new Tone.Analyser('fft', 64);\n\tvar waveform = new Tone.Analyser('waveform', 32);\n\tvar soundPlayer = [];\n\t///static/media/sample_1-1.8e6341be.wav\n\t\n\tfor (const [key, value] of Object.entries(soundFiles)) {\n\t\tconsole.log(key, value);\n\t\tvar temp = new Tone.Player({\n\t\t\t\"url\": value,\n\t\t\t\"fadeOut\": soundFadeOut[key],\n\t\t\t\"fadeIn\": soundFadeIn[key]\n\t\t\t}).connect(meter).connect(waveform).connect(fft).toMaster();\n\t\tsoundPlayer.push(temp);\n\t}\n\n\treturn {meter: meter, fft: fft, waveform: waveform, soundPlayer:soundPlayer};\n}\n\n\nclass MusicBox extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.state = Object.assign({\n\t\t\tnowOrder: 0,\n\t\t\teuro: null,\n\t\t\tsoundInterval: null,\n\t\t\tloading: true,\n\t\t\tloadPercentage: 0,\n\t\t\t//timeoutFunc: null,\n\t\t\t},soundPreload());\n\t\tTone.Buffer.on('load', this.loadFinish);\n\t}\n\n\tloadFinish = () => {\n\t\tconsole.log('load Finished!');\n\t\tthis.setState({\n\t\t\tbuttonTxt: \"START\", \n\t\t\tstyle:{},\n\t\t\tloading: false,\n\t\t});\n\t\tthis.clickButton();\n\t}\n\t\n\tcomponentDidMount() {\n\t\tthis.calcLoadingPercentage();\n\t}\n\t\n\tshouldComponentUpdate(nextProps, nextState) {\n\t\tif (\"stop\" in nextProps.data) {\n\t\t\t//console.log(`<stop> stop music`);\n\t\t\tthis.stopAll();\n\t\t\treturn false;\n\t\t}\n\t\t//console.log(this.props.data);\n\t\treturn (nextProps.refresh !== this.props.refresh) ||\n\t\t\t\t(nextState.style !== this.state.style) || \n\t\t\t\t(nextProps.show && !this.props.show) || \n\t\t\t\t(nextState.loadPercentage !== this.state.loadPercentage);\n\t}\n\n\trender() {\n\t\tlet {loading, loadPercentage} = this.state;\n\t\tlet {data} = this.props;\n\t\tlet {soundPlayer, nowOrder} = this.state;\n\t\t//console.log(`<render sound Data> ${JSON.stringify(data)}`);\n\t\t//console.log(`<render> animBOX`);\n\t\t//soundPlayer[nowOrder].stop();\n\t\tif (this.props.show) {\n\n\t\t\tif (\"order\" in data) {\n\t\t\t\tif (data.delay > 0) {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.playSound(data);\n\t\t\t\t\t}, data.delay);\n\t\t\t\t} else {\n\t\t\t\t\tthis.playSound(data);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (\"volume\" in data) {\n\t\t\t\t//console.log(`<volume> ${data.volume}`);\n\t\t\t\t//this.state.soundPlayer[nowOrder].volume.value = data.volume;\n\t\t\t\tsoundPlayer[nowOrder].volume.value = data.volume;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn (\n\t\tthis.props.show && \n\t\t\t<Fade show={loading}>\n\t\t\t\t<div> \n\t\t\t\t\tLoading {loadPercentage+'%'}\n\t\t\t\t\t<ProgressBar percentage={loadPercentage}/>\n\t\t\t\t</div>\n\t\t\t</Fade>\n\t\t);\n\t\t\n\t}\n\n\tcalcLoadingPercentage = () => {\n\t\tif (this.state.loadPercentage === 1.) return;\n\t\tlet loaded = 0;\n\t\tthis.state.soundPlayer.forEach((e) => {\n\t\t\tif (e.loaded) loaded++;\n\t\t});\n\t\tthis.setState({loadPercentage: Math.floor(100*loaded/soundFileNum)});\n\t\tsetTimeout(this.calcLoadingPercentage, 200);\n\t}\n\n\tclickButton = () => {\n\t\tif (this.state.buttonTxt !== \"START\") {\n\t\t\treturn;\n\t\t}\n\t\t//let data = {order:0, mode:0, volume:0};\n\t\tthis.setState({style: {display: \"none\"}});\n\t\t//this.playSound(data);\n\t}\n\n\tstopAll() {\n\t\tthis.state.soundPlayer.forEach((e) => {\n\t\t\te.stop();\n\t\t}) \n\t}\n\n\tplaySound(data) {\n\t\tlet {order, mode, volume} = data;\n\n\t\tlet {soundPlayer} = this.state;\n\n\t\tif (volume !== undefined)\n\t\t\tsoundPlayer[order].volume.value = volume;\n\t\n\t\tif (soundPlayer[order].loaded) {\n\t\t\tsoundPlayer[order].start();\n\t\t} else {\n\t\t\tconsole.log(order+' not loaded!');\n\t\t}\n\t\t//this.setState({nowOrder: order});\n\t\tthis.state.nowOrder = order;\n\t\t//console.log(`this.state.nowOrder ${this.state.nowOrder}`);\n\t\tif (mode === \"follow\") \n\t\t//DEBUG: uncomment!\n\t\t\tthis.genAlphaFromSound(order);\n\t\t//this.state.nowOrder ++;\n\t\t//this.setState({nowOrder: order});\n\t}\n\n\tgenAlphaFromSound(order) {\n\t\t//console.log(\"genAlphaFromSound\");\n\t\t//console.log(`<v> ${this.state.soundPlayer[order].volume.value}`);\n\t\t//this.setState({euro: new OneEuroFilter(200)});\n\t\tthis.state.euro = new OneEuroFilter(200);\n\t\t//let {euro, waveform, soundInterval} = this.state;\n\t\t//let euroOut = 0;\n\t\t//euro = new OneEuroFilter(200);\n\t\tif (this.state.soundInterval != null) clearInterval(this.state.soundInterval);\n\t\t//TODO: setState\n\n\t\tthis.state.soundInterval = setInterval(this.calculateEuro, 100, this);\n\t\t\n\t}\n\n\tcalculateEuro = () => {\n\t\tvar multi = 7;\n\t\t//console.log(JSON.stringify(t.state));\n\t\tlet {nowOrder, waveform, euro} = this.state;\n\t\tlet euroOut = 0;\n\t\tif (this.state.soundPlayer[nowOrder].state === 'stopped') {\n\t\t\t//TODO: toblack\n\t\t\tclearInterval(this.state.soundInterval);\n\t\t\t//TODO: setState\n\t\t} else {\n\t\t\tvar waveData = waveform.getValue();\n\t\t\t//console.log(`${waveData}`);\n            var max = Math.max.apply(Math, waveData);\n            var min = Math.min.apply(Math, waveData)*-1;\n            var r = Math.max(max, min);\n            r *= multi;\n            if (r > 1) {\n                r = 1.;\n            } else if (r < 0.2 && r != 0) {\n                r = 0.2;\n            }\n            //console.log(`r: ${r*1000}`);\n            euroOut = 1.0*euro.filter(r);\n            //console.log(`euro: ${euroOut}`);\n\t\t}\n\t\tthis.props.onChange(euroOut, this.props.parent);\n\t\t//this.state.soundPlayer[nowOrder].volume.value = this.props.v;\n\t\t//console.log(`<volume>: ${this.state.soundPlayer[nowOrder].volume.value}`);\n\t}\n}\n\nexport default MusicBox;","import React, {Component} from 'react';\nimport {soundFileNum, rgbColors} from '../usages/assetList';\nimport AnimeBox from './AnimeBox';\nimport MusicBox from './MusicBox';\nimport {connectSocket} from '../usages/socketUsage';\nimport Fade from './Fade';\n\n\nconst inArrRange = (num, len) => {\n\t//console.log(num >= 0 && num < len);\n\treturn num >= 0 && num < len;\n}\n\nconst genUUID = () => {\n\tvar d = Date.now();\n    if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n        d += performance.now(); //use high-precision timer if available\n    }\n    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n    });\n    sessionStorage.setItem(\"StageEffectUUID\", uuid);\n    return uuid;\n}\n\nconst jsonCopy = (jsonObj) => {\n  return JSON.parse(JSON.stringify(jsonObj));\n}\n\n\nclass EffectBox extends Component {\n\n\tstate = {\n    \tuuid: sessionStorage.getItem(\"StageEffectUUID\") || genUUID(),\n        refreshAnime: false,\n        refreshMusic: false,\n        socketData: {},\n        lightData: {},\n        soundData: {},\n        //opa: \"rgba(0,0,0,1)\",\n        opa: -1,\n        opacity: 0,\n    };\n\n    componentDidMount() {\n\n        this.setState({\n\t\t\tsocket: connectSocket('/receiver', this.socketConnectFn)\n\t\t})\n        \n\t}\n\t\n\tsocketConnectFn = () => {\n\t\tlet {socket} = this.state;\n\t\tconsole.log('receiver connected to server');\n\t\tconsole.log(this.state.uuid);\n\t\tconsole.log(socket);\n\t\tsocket.emit('connected', {\n\t\t\tuuid: this.state.uuid\n\t\t});\n\n\t\t //this.setupBeforeUnloadListener(socket);\n\t\tthis.setState({socketID: socket.id});\n\t\t socket.on('debug', (data) => {\n\t\t\t console.log(`<socket> ${data}`);\n\t\t })\n\n\t\tsocket.on('controlData', this.receiveControlData.bind(this));\n\t\t\n\t}\n\n    receiveControlData(data) {\n \t\t//console.log(`<data> ${JSON.stringify(data)}`);\n \t\t\n \t\tlet {light, sound} = this.handleSocketData(data);\n \t\t//console.log(`<sound data>  ${JSON.stringify(sound)}`)\n \t\tif (JSON.stringify(sound) !== \"{}\") {\n \t\t\tthis.setState((prevState) => ({\n\t \t\t\tsoundData: jsonCopy(sound),\n\t \t\t\trefreshMusic: !prevState.refreshMusic,\n\t\t\t}));\n \t\t}\n \t\tif (JSON.stringify(light) !== \"{}\") {\n \t\t\tthis.setState((prevState) => ({\n \t\t\t\tsoundData: jsonCopy(sound),\n\t \t\t\tlightData: jsonCopy(light),\n\t \t\t\trefreshAnime: !prevState.refreshAnime,\n\t\t\t\t\n\t\t\t}));\n \t\t}\n    }\n\n    handleSocketData(data) {\n    \t//console.log(rgbColors);\n    \tvar sound = \"sound\" in data ? this.handleSoundData(data.sound) : {};\n    \tvar light = \"light\" in data ? this.handleLightData(data.light) : {};\n    \t \n    \t//console.log(`<sound in handleSocketData> ${JSON.stringify(sound)}`);\n    \t//console.log(`<light> ${JSON.stringify(light)}`);\n\n    \tif (!(\"color\" in light) && JSON.stringify(light) !== \"{}\" && \"order\" in sound) {\n    \t\t//console.log(`color: ${rgbColors[sound.order % rgbColors.length]}`);\n    \t\tlight.color = rgbColors[sound.order % rgbColors.length];\n    \t}\n    \tif (\"color\" in light && \"order\" in sound) {\n    \t\tif (light.color == \"*\") {\n    \t\t\t//console.log(`color: ${rgbColors[sound.order % rgbColors.length]}`);\n    \t\t\tlight.color = rgbColors[sound.order % rgbColors.length];\n    \t\t}\n    \t}\n    \tif (\"delay\" in light && \"order\" in sound) {\n    \t\tsound.delay = light.delay;\n\n    \t}\n    \tif (\"mode\" in light && \"order\" in sound) {\n    \t\tsound.mode = light.mode;\n\n    \t}\n    \tif (\"mode\" in light && \"stop\" in sound) {\n    \t\tif (light.mode == \"follow\") light = {};\n    \t}\n    \t// TODO: if color mode == follow ? \n\n    \treturn {light: light, sound: sound};\n    }\n\n    handleSoundData(sound) {\n    \t//if order not in range => no sound!\n    \t//console.log(`<handleSoundData> ${sound.order}`);\n\n    \tif (!inArrRange(sound.order, soundFileNum)) {\n    \t\tif (!('volume' in sound))\n    \t\t\treturn {};\n    \t\telse {\n    \t\t\tdelete sound.order;\n    \t\t\treturn sound;\n    \t\t}\n    \t}\n\n    \t// if orderTo not in range or < order: to order\n    \tif (!inArrRange(sound.orderTo, soundFileNum+1) \n    \t\t|| sound.orderTo < sound.order) {\n\t\t\tsound.orderTo = sound.order;\n\t\t}\n\t\t\n    \t//calculate random\n\t    sound.order = sound.order + \n\t    \t\tMath.floor(Math.random()*(sound.orderTo-sound.order));\n\t    //console.log(`order ${sound.order}`); \n\n\t    if (\"stop\" in sound) {\n    \t\tif (sound.stop === \"*\") delete sound.stop;\n    \t}\n\t    return sound;\n    }\n\n    handleLightData(light) {\n    \tif (light.mode === \"none\") return {};\n    \tif (\"color\" in light) {\n    \t\tif (light.color === \"*\") delete light.color;\n    \t}\n    \tlight.delay = Math.random()*light.delay;\n    \treturn light;\n    }\n\n    changeHandler(v) {\n    \t//console.log(`changeHandler: ${v}`);\n    \tthis.setState({opacity: v});\n    }\n\n\trender(){\n\n\t\tlet {refreshAnime, refreshMusic, lightData, soundData, opacity} = this.state;\n\n\t\treturn(\n\t\t\t<div id=\"wrap\">\n\t\t\t\t<Fade show={this.props.show}>\n\t\t\t\t\t<AnimeBox refresh={refreshAnime} data={lightData} \n\t\t\t\t\topacity={opacity}></AnimeBox>\n\t\t\t\t</Fade>\n\t\t\t\t<MusicBox show={this.props.show} refresh={refreshMusic} data={soundData} onChange={this.changeHandler.bind(this)} parent={this}></MusicBox>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tsetupBeforeUnloadListener = (socket) => {\n        window.addEventListener(\"beforeunload\", (event) => {\n            event.preventDefault();\n            socket.emit('disconnected', {\n\t\t        uuid: this.state.uuid\n\t    \t})\n\t    \treturn event;\n        });\n    };\n\n    clickButton = () => {\n    \t//console.log(`click ${this.state.refreshAnime}`);\n    \tvar r = Math.floor(Math.random()*255);\n    \tvar g = Math.floor(Math.random()*255);\n    \tvar b = Math.floor(Math.random()*255);\n    \t//testPlayer[0].start();\n    \tif (JSON.stringify(this.state.soundData) != \"{}\") {\n    \t\tthis.setState((prevState) => ({\n\t\t\t\trefreshMusic: !prevState.refreshMusic,\n\t\t\t}));\n    \t}\n    \tif (JSON.stringify(this.state.lightData) != \"{}\") {\n    \t\tthis.setState((prevState) => ({\n\t\t\t\trefreshAnime: !prevState.refreshAnime,\n\t\t\t}));\n    \t}\n  //   \tthis.setState((prevState) => ({\n\t\t// \trefreshAnime: !prevState.refreshAnime,\n\t\t// \trefreshMusic: !prevState.refreshMusic,\n\t\t// \t//opa: `rgba(${r},${b},${b},1)`\n\t\t// \t//opa: `rgba(255,255,0,1)`\n\t\t// \topa: prevState.opa*10\n\t\t// }));\n\t\t//console.log(rgbColors);\n    }\n}\n\nexport default EffectBox;\n","import React, {Component, useState}  from 'react';\nimport '../css/App.css';\nimport LandPage from './LandPage';\nimport Fade from './Fade';\nimport MicInput from './MicInput';\nimport EffectBox from './EffectBox';\n\n// class App extends Component {\n\n//   select = (mode) => {\n//     console.log('select: '+ mode);\n//   }\n//   render() {\n    \n//     return (\n//       <div>\n//         {<LandPage select={this.select}/>\n//       </div>\n//     )\n//   }\n// }\n\nfunction App() {\n  const [landing, setLanding] = useState(true);\n  const [transmit, setTransmit] = useState(false);\n  const [receive, setReceive] = useState(false);\n  let selectMode = (mode) => {\n    setLanding(false);\n    if (mode === 0) setTransmit(true);\n    else setReceive(true);\n    console.log('select: '+ mode);\n  }\n\n  return (\n    <div>\n      <Fade show={landing}>\n        <LandPage select={selectMode}/>\n      </Fade>\n      <Fade show={transmit}>\n        <MicInput/>\n      </Fade>\n      <EffectBox show={receive} />\n    </div>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n"],"sourceRoot":""}