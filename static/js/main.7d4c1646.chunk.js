(this["webpackJsonpopen-studio"]=this["webpackJsonpopen-studio"]||[]).push([[0],Array(66).concat([function(e,t){e.exports.hsvToRgb=function(e,t,a){var n,o,i,r=Math.floor(6*e),s=6*e-r,c=a*(1-t),l=a*(1-s*t),u=a*(1-(1-s)*t);switch(r%6){case 0:n=a,o=u,i=c;break;case 1:n=l,o=a,i=c;break;case 2:n=c,o=a,i=u;break;case 3:n=c,o=l,i=a;break;case 4:n=u,o=c,i=a;break;case 5:n=a,o=c,i=l}return{r:255*n,g:255*o,b:255*i}},e.exports.rgbToHsv=function(e,t,a){e/=255,t/=255,a/=255;var n,o,i=Math.max(e,t,a),r=Math.min(e,t,a),s=i,c=i-r;if(o=0==i?0:c/i,i==r)n=0;else{switch(i){case e:n=(t-a)/c+(t<a?6:0);break;case t:n=(a-e)/c+2;break;case a:n=(e-t)/c+4}n/=6}return{h:n,s:o,v:s}},e.exports.hslToRgb=function(e,t,a){var n,o,i;if(0==t)n=o=i=a;else{var r=function(e,t,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?e+6*(t-e)*a:a<.5?t:a<2/3?e+(t-e)*(2/3-a)*6:e},s=a<.5?a*(1+t):a+t-a*t,c=2*a-s;n=r(c,s,e+1/3),o=r(c,s,e),i=r(c,s,e-1/3)}return{r:255*n,g:255*o,b:255*i}},e.exports.rgbToHsl=function(e,t,a){e/=255,t/=255,a/=255;var n,o,i=Math.max(e,t,a),r=Math.min(e,t,a),s=(i+r)/2;if(i==r)n=o=0;else{var c=i-r;switch(o=s>.5?c/(2-i-r):c/(i+r),i){case e:n=(t-a)/c+(t<a?6:0);break;case t:n=(a-e)/c+2;break;case a:n=(e-t)/c+4}n/=6}return{h:n,s:o,l:s}}},function(e,t,a){e.exports=a(198)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,function(e,t,a){var n={"./Mixed_Fx_Sounds/90 Realm.wav":147,"./Mixed_Fx_Sounds/91 Twisted.wav":148,"./Mixed_Fx_Sounds/92 Ghosts.wav":149,"./Noises/Analogue Hiss Lo Boost.aif":150,"./Noises/Analogue Hiss Lo Cut.aif":151,"./Noises/Analogue Hiss Mid Boost.aif":152,"./Noises/Crackle Pops.aif":153,"./Noises/Crunchy Crackle.aif":154,"./Noises/Fake Vinyl 1.aif":155,"./Noises/Fake Vinyl 2.aif":156,"./Noises/FizzPop.aif":157,"./Noises/FizzPopper2.aif":158,"./S7_recordings/S7_1.m4a":159,"./S7_recordings/S7_2.m4a":160,"./S7_recordings/S7_3.m4a":161,"./S7_recordings/S7_4.m4a":162,"./iPad_FX_Samples/sample_1-1.wav":163,"./iPad_FX_Samples/sample_1-2.wav":164,"./iPad_FX_Samples/sample_1-3.wav":165,"./iPad_FX_Samples/sample_1-4.wav":166,"./iPad_FX_Samples/sample_1-5.wav":167,"./iPad_FX_Samples/sample_2-1.wav":168,"./iPad_FX_Samples/sample_2-2.wav":169,"./iPad_FX_Samples/sample_2-3.wav":170,"./iPad_FX_Samples/sample_2-4.wav":171,"./iPad_FX_Samples/sample_2-5.wav":172,"./iPad_FX_Samples/sample_3-1.wav":173,"./iPad_FX_Samples/sample_3-2.wav":174,"./iPad_FX_Samples/sample_3-3.wav":175,"./iPad_FX_Samples/sample_3-4.wav":176,"./iPad_FX_Samples/sample_3-5.wav":177,"./iPad_FX_Samples/sample_4-1.wav":178,"./iPad_FX_Samples/sample_4-2.wav":179,"./iPad_FX_Samples/sample_4-3.wav":180,"./iPad_FX_Samples/sample_4-4.wav":181,"./iPad_FX_Samples/sample_4-5.wav":182};function o(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=146},function(e,t,a){e.exports=a.p+"static/media/90 Realm.aaa23448.wav"},function(e,t,a){e.exports=a.p+"static/media/91 Twisted.5106b983.wav"},function(e,t,a){e.exports=a.p+"static/media/92 Ghosts.197f0c90.wav"},function(e,t,a){e.exports=a.p+"static/media/Analogue Hiss Lo Boost.332e560a.aif"},function(e,t,a){e.exports=a.p+"static/media/Analogue Hiss Lo Cut.952afa17.aif"},function(e,t,a){e.exports=a.p+"static/media/Analogue Hiss Mid Boost.4cd487d1.aif"},function(e,t,a){e.exports=a.p+"static/media/Crackle Pops.c7977529.aif"},function(e,t,a){e.exports=a.p+"static/media/Crunchy Crackle.5bf5313e.aif"},function(e,t,a){e.exports=a.p+"static/media/Fake Vinyl 1.d7b01358.aif"},function(e,t,a){e.exports=a.p+"static/media/Fake Vinyl 2.253f0fd1.aif"},function(e,t,a){e.exports=a.p+"static/media/FizzPop.bbb2cfde.aif"},function(e,t,a){e.exports=a.p+"static/media/FizzPopper2.0079c45c.aif"},function(e,t,a){e.exports=a.p+"static/media/S7_1.f320a9ac.m4a"},function(e,t,a){e.exports=a.p+"static/media/S7_2.cfd2f9df.m4a"},function(e,t,a){e.exports=a.p+"static/media/S7_3.3143dd66.m4a"},function(e,t,a){e.exports=a.p+"static/media/S7_4.4e939f3c.m4a"},function(e,t,a){e.exports=a.p+"static/media/sample_1-1.8e6341be.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_1-2.6c60e8c3.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_1-3.e15b3f63.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_1-4.01880ee2.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_1-5.07b7069b.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_2-1.e1be8bc7.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_2-2.2f9c9e15.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_2-3.9b5e44f6.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_2-4.1fb6d5e0.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_2-5.d0cf3356.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_3-1.84339a05.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_3-2.908333bc.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_3-3.1e96fc54.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_3-4.a305e468.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_3-5.7fcb4950.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_4-1.61dd2193.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_4-2.20c20d96.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_4-3.291c8085.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_4-4.06a7ff8b.wav"},function(e,t,a){e.exports=a.p+"static/media/sample_4-5.9da318bd.wav"},,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(61),r=a.n(i),s=(a(72),a(1));a(73);a(74);var c=a(62),l=a.n(c);var u,d=function(e){var t=[0,10],a="Your device is the channel between cyberspace and meatspace.</br></br>How do you want to be connected?",i=Object(n.useState)(""),r=Object(s.a)(i,2),c=r[0],u=r[1],d=Object(n.useState)(0),f=Object(s.a)(d,2),p=f[0],h=f[1],m=Object(n.useState)(0),v=Object(s.a)(m,2),g=v[0],b=v[1];!function(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e})),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){if(p>=a.length){if(-1===g)return;b(g+1)}else{var e=1;"<"===a[p]&&(e=4),u(a.substring(0,p+e)),h(p+e)}}),100);var w=Object(n.useState)(""),_=Object(s.a)(w,2),y=_[0],S=_[1];Object(n.useEffect)((function(){g>t[0]&&S("translate"),g>t[1]&&S("translate2")}));var x=function(t){e.select(t)};return o.a.createElement("div",{id:"LandpageWrapper",className:y},o.a.createElement("div",{id:"LandpageTxt"},l()(c)),g>t[0]&&o.a.createElement("button",{className:"selectBtn",onClick:function(){x(0)}},"Transmitter"),g>t[1]&&o.a.createElement("button",{className:"selectBtn",onClick:function(){x(1)}},"Receiver"))},f=function(e){var t=e.show,a=e.children,i=Object(n.useState)(t),r=Object(s.a)(i,2),c=r[0],l=r[1];Object(n.useEffect)((function(){t&&l(!0)}),[t]);return c&&o.a.createElement("div",{style:{animation:"".concat(t?"fadeIn":"fadeOut"," 0.5s")},onAnimationEnd:function(){t||l(!1)}},a)},p=a(2),h=a(3),m=a(7),v=a(6),g=a(8),b=a(63),w=a.n(b),_=a(32),y=a(64),S=a.n(y),x="https://stage-effect-server1.herokuapp.com",O=function(){!0,console.log("socket connect to server")},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O,a=S()(x+e);return void 0===u&&(u=a),a.on("connect",t),a},j=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;a.emit("osc",{address:e,args:[t]})};function M(e){var t,a,n=0,o=[],i=[],r=[0,0,0];function s(t,n){for(var i,r=32*Math.PI/a,s=0,c=0;c<a;c+=16){for(var l=0,u=0,d=c;d<c+16&&d<a;d++)l+=o[d],u++;var f=(l/=u)/128*n,p=(t+f)*Math.sin(s),h=(t+f)*Math.cos(s);e.curveVertex(p,h),0===c&&(i=[p,h]),s+=r}e.vertex(i[0],i[1]),e.endShape()}e.setup=function(){e.createCanvas(e.windowWidth,e.windowHeight),e.frameRate(30)},e.windowResized=function(){e.resizeCanvas(e.windowWidth,e.windowHeight)},e.myCustomRedrawAccordingToNewPropsHandler=function(e){if(e.bufferLength&&(a=e.bufferLength),e.analyser){if(null==e.analyser)return;t=e.analyser,o=new Uint8Array(t.fftSize),i=new Uint8Array(t.fftSize)}e.btnClick&&e.btnClick},e.draw=function(){if(n++,void 0!==t&&(t.getByteFrequencyData(i),t.getByteTimeDomainData(o)),e.background(r[0],r[1],r[2],50),!(o.length<=0)){var c=function(e){var t=Math.max.apply(Math,Object(_.a)(i)),n=44100*i.indexOf(t)/(2*a);return t>e?Math.floor(n):0}(50),l=Math.max.apply(Math,Object(_.a)(i))/256;l>50/255&&n%10===0&&j("/sound",{f:c,d:l}),function(t,a){e.push(),e.translate(e.windowWidth/2,e.windowHeight/2);var n=e.map(t,0,1,40,50),o=e.map(t,0,1,30,70),i=Math.floor(e.map(a,100,2e3,0,360,!0)),c=Math.floor(e.map(t,.2,1,0,50,!0));console.log(i,c),e.stroke("hsl(".concat(i,", ").concat(c,"%, 50%)")),e.fill(r[0],r[1],r[2]),e.beginShape(),s(o,n),e.endShape(e.CLOSE),e.fill("hsla(".concat(i,", ").concat(c,"%, 90%, 0.5)"));for(var l=0;l<30;l++)e.noStroke(),e.beginShape(),s(o-4-2*l,n),e.endShape(e.CLOSE),e.fill(r[0],r[1],r[2],10);e.pop()}(l,c),e.textSize(15),e.fill(200),e.textAlign(e.CENTER),e.text("MAKE SOUND",e.windowWidth/2,e.windowHeight-50)}}}var F=function(e){function t(){var e;Object(p.a)(this,t),(e=Object(m.a)(this,Object(v.a)(t).call(this))).btnClick=function(){navigator.mediaDevices.getUserMedia({audio:!0}).then(e.micStart,e.micError)},e.micStart=function(t){e.setState({style:{display:"none"}});var a=e.state.context,n=a.createMediaStreamSource(t),o=a.createAnalyser();n.connect(o),o.fftSize=2048;var i=o.frequencyBinCount,r=new Uint8Array(o.fftSize);e.setState({analyser:o,dataArray:r,bufferLength:i})},e.micError=function(){e.setState({btnTxt:"RE-EANBLE!"}),console.log("error")},e.update=function(){var t=e.state,a=t.dataArray,n=t.analyser;console.log(a),n.getByteFrequencyData(a)};var a=window.AudioContext||window.webkitAudioContext||!1;return e.state={timer:null,style:{},btnTxt:"START",context:a?new a:null},e}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.btnClick(),k("/user")}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(w.a,{sketch:M,analyser:this.state.analyser,bufferLength:this.state.bufferLength}))}}]),t}(n.Component),P=a(20),E=["./iPad_FX_Samples/sample_1-1.wav","./iPad_FX_Samples/sample_1-2.wav","./iPad_FX_Samples/sample_1-3.wav","./iPad_FX_Samples/sample_1-4.wav","./iPad_FX_Samples/sample_1-5.wav","./iPad_FX_Samples/sample_2-1.wav","./iPad_FX_Samples/sample_2-2.wav","./iPad_FX_Samples/sample_2-3.wav","./iPad_FX_Samples/sample_2-4.wav","./iPad_FX_Samples/sample_2-5.wav","./Noises/Analogue Hiss Mid Boost.aif","./Noises/Crackle Pops.aif","./Noises/Crunchy Crackle.aif","./S7_recordings/S7_1.m4a","./S7_recordings/S7_2.m4a","./S7_recordings/S7_3.m4a","./S7_recordings/S7_4.m4a"],C=a(146),A={},D=E.length;C.keys().forEach((function(e){var t=E.indexOf(e);-1!==t&&(A[t]=C(e))}));var T=[0,0,0,0,0,0,0,0,0,0,10,10,10,10,10,10,10],N=[0,0,0,0,0,0,0,0,0,0,0,0,0,10,10,10,10],X=["255, 255, 255","255, 255, 255","255, 0, 0","0, 255, 0","0, 0, 255","0, 253, 255","255, 0, 0","255,251,0","150,0,150","0, 255, 0","255,191,0","255,64,255"],L=a(65),B=a.n(L),I=a(4),H=a(66),R=(a(195),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={defaultProp:{easing:"easeInOutQuad",loop:2,duration:500,direction:"alternate",delay:0,endDelay:0,background:"rgba(0,0,0,1)"}},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return"follow"==e.data.mode&&e.opacity!=this.props.opacity||e.refresh!==this.props.refresh}},{key:"computeData",value:function(e){var t=0;return"color"in e&&(e.colorTemp=e.color),"alpha"in e&&(t=e.alpha),"follow"==e.mode&&(t=this.props.opacity),"background"in e||(e.direction="blink"==e.mode?"alternate":"normal",e.loop="light"==e.mode?e.loopTime:2*e.loopTime),e.background="rgba(".concat(e.colorTemp,",").concat(t,")"),delete e.loopTime,delete e.color,delete e.alpha,e}},{key:"genRgbStyle",value:function(e,t){var a=e,n=a.substring(5,a.length-1).split(","),o={stiffness:t,damping:30};return{style:{r:Object(I.spring)(parseFloat(n[0]),o),g:Object(I.spring)(parseFloat(n[1]),o),b:Object(I.spring)(parseFloat(n[2]),o),a:Object(I.spring)(parseFloat(n[3]),o)},motionFunc:this.rgbMotion}}},{key:"rgbMotion",value:function(e){var t=e.r,a=e.g,n=e.b,i=e.a;return o.a.createElement("div",{id:"lightBox",key:Date.now(),style:{background:"rgba(".concat(Math.floor(t),",").concat(Math.floor(a),",").concat(Math.floor(n),",").concat(i,")")}})}},{key:"genHslStyle",value:function(e){var t=e,a=t.substring(5,t.length-1).split(","),n={stiffness:80,damping:20},o=Object(H.rgbToHsl)(parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2])),i=o.h,r=o.s,s=o.l;return{style:{h:Object(I.spring)(i,n),s:Object(I.spring)(r,n),l:Object(I.spring)(s,n),a:Object(I.spring)(parseFloat(a[3]),n)},motionFunc:this.hslMotion}}},{key:"hslMotion",value:function(e){var t=e.h,a=e.s,n=e.l,i=e.a;return o.a.createElement("div",{id:"lightBox",key:Date.now(),style:{background:"hsla(".concat(360*t,",").concat(100*a,"%,").concat(100*n,"%,").concat(i,")")}})}},{key:"render",value:function(){var e=this.state.defaultProp,t=this.computeData(this.props.data),a=Object.assign(e,t),n=this.genRgbStyle(a.background,a.duration),i=n.style,r=n.motionFunc,s=o.a.createElement(I.Motion,{style:i},r),c=o.a.createElement(B.a,Object.assign({key:Date.now()},a),o.a.createElement("div",{id:"lightBox"}));return"blink"==a.mode?c:s}}]),t}(n.Component)),z=a(12),U=a.n(z),J=function(){function e(t){Object(p.a)(this,e),this.setAlpha(t),this.y=null,this.s=null}return Object(h.a)(e,[{key:"setAlpha",value:function(e){if(e<=0||e>1)throw new Error;this.alpha=e}},{key:"filter",value:function(e,t,a){var n;return a&&this.setAlpha(a),n=this.y?this.alpha*e+(1-this.alpha)*this.s:e,this.y=e,this.s=n,n}},{key:"lastValue",value:function(){return this.y}}]),e}(),V=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(Object(p.a)(this,e),t<=0||a<=0||o<=0)throw new Error;this.freq=t,this.minCutOff=a,this.beta=n,this.dCutOff=o,this.x=new J(this.alpha(this.minCutOff)),this.dx=new J(this.alpha(this.dCutOff)),this.lasttime=null}return Object(h.a)(e,[{key:"alpha",value:function(e){var t=1/this.freq;return 1/(1+1/(2*Math.PI*e)/t)}},{key:"filter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.lasttime&&t&&(this.freq=1/(t-this.lasttime)),this.lasttime=t;var a=this.x.lastValue(),n=a?(e-a)*this.freq:0,o=this.dx.filter(n,t,this.alpha(this.dCutOff)),i=this.minCutOff+this.beta*Math.abs(o);return this.x.filter(e,t,this.alpha(i))}}]),e}();a(196);function q(e){var t={width:"".concat(e.percentage,"%")};return o.a.createElement("div",{className:"filler",style:t})}var W=function(e){return o.a.createElement("div",{className:"progressBar"},o.a.createElement(q,{percentage:e.percentage}))},G=(a(197),function(){console.log("soundPreload");for(var e=new U.a.Meter("level"),t=new U.a.Analyser("fft",64),a=new U.a.Analyser("waveform",32),n=[],o=0,i=Object.entries(A);o<i.length;o++){var r=i[o],c=Object(s.a)(r,2),l=c[0],u=c[1];console.log(l,u);var d=new U.a.Player({url:u,fadeOut:T[l],fadeIn:N[l]}).connect(e).connect(a).connect(t).toMaster();n.push(d)}return{meter:e,fft:t,waveform:a,soundPlayer:n}}),K=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(m.a)(this,Object(v.a)(t).call(this))).loadFinish=function(){console.log("load Finished!"),e.setState({buttonTxt:"START",style:{},loading:!1}),e.clickButton()},e.calcLoadingPercentage=function(){if(1!==e.state.loadPercentage){var t=0;e.state.soundPlayer.forEach((function(e){e.loaded&&t++})),e.setState({loadPercentage:Math.floor(100*t/D)}),setTimeout(e.calcLoadingPercentage,200)}},e.clickButton=function(){if("START"===e.state.buttonTxt){e.setState({style:{display:"none"}}),e.playSound({order:0,mode:0,volume:0})}},e.calculateEuro=function(){var t=e.state,a=t.nowOrder,n=t.waveform,o=t.euro,i=0;if("stopped"===e.state.soundPlayer[a].state)clearInterval(e.state.soundInterval);else{var r=n.getValue(),s=Math.max.apply(Math,r),c=-1*Math.min.apply(Math,r),l=Math.max(s,c);(l*=7)>1?l=1:l<.2&&0!=l&&(l=.2),i=1*o.filter(l)}e.props.onChange(i,e.props.parent)},e.state=Object.assign({nowOrder:0,euro:null,soundInterval:null,loading:!0,loadPercentage:0},G()),U.a.Buffer.on("load",e.loadFinish),e}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.calcLoadingPercentage()}},{key:"shouldComponentUpdate",value:function(e,t){if("stop"in e.data)return this.stopAll(),!1;if(e.show&&!this.props.show){this.playSound({order:0,mode:0,volume:0})}return e.refresh!==this.props.refresh||t.style!==this.state.style||e.show&&!this.props.show||t.loadPercentage!==this.state.loadPercentage}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.loadPercentage,i=this.props.data,r=this.state,s=r.soundPlayer,c=r.nowOrder;return this.props.show&&("order"in i?i.delay>0?setTimeout((function(){e.playSound(i)}),i.delay):this.playSound(i):"volume"in i&&s[c].loaded&&(s[c].volume.value=i.volume)),this.props.show&&o.a.createElement(f,{show:a},o.a.createElement("div",null,"Loading ",n+"%",o.a.createElement(W,{percentage:n})))}},{key:"stopAll",value:function(){this.state.soundPlayer.forEach((function(e){e.stop()}))}},{key:"playSound",value:function(e){var t=e.order,a=e.mode,n=e.volume,o=this.state.soundPlayer;o[t].loaded?(void 0!==n&&(o[t].volume.value=n),o[t].start()):(alert(t+" not loaded!"),console.log(t+" not loaded!")),this.state.nowOrder=t,"follow"===a&&this.genAlphaFromSound(t)}},{key:"genAlphaFromSound",value:function(){this.state.euro=new V(200),null!=this.state.soundInterval&&clearInterval(this.state.soundInterval),this.state.soundInterval=setInterval(this.calculateEuro,100,this)}}]),t}(n.Component),Q=function(e,t){return e>=0&&e<t},Y=function(){var e=Date.now();"undefined"!==typeof performance&&"function"===typeof performance.now&&(e+=performance.now());var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:3&a|8).toString(16)}));return sessionStorage.setItem("StageEffectUUID",t),t},Z=function(e){return JSON.parse(JSON.stringify(e))},$=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).state={uuid:sessionStorage.getItem("StageEffectUUID")||Y(),refreshAnime:!1,refreshMusic:!1,socketData:{},lightData:{},soundData:{},opa:-1,opacity:0},a.socketConnectFn=function(){var e=a.state.socket;console.log("receiver connected to server"),console.log(a.state.uuid),console.log(e),e.emit("connected",{uuid:a.state.uuid}),a.setState({socketID:e.id}),e.on("debug",(function(e){console.log("<socket> ".concat(e))})),e.on("controlData",a.receiveControlData.bind(Object(P.a)(a)))},a.setupBeforeUnloadListener=function(e){window.addEventListener("beforeunload",(function(t){return t.preventDefault(),e.emit("disconnected",{uuid:a.state.uuid}),t}))},a.clickButton=function(){Math.floor(255*Math.random()),Math.floor(255*Math.random()),Math.floor(255*Math.random());"{}"!=JSON.stringify(a.state.soundData)&&a.setState((function(e){return{refreshMusic:!e.refreshMusic}})),"{}"!=JSON.stringify(a.state.lightData)&&a.setState((function(e){return{refreshAnime:!e.refreshAnime}}))},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.setState({socket:k("/receiver",this.socketConnectFn)})}},{key:"receiveControlData",value:function(e){var t=this.handleSocketData(e),a=t.light,n=t.sound;"{}"!==JSON.stringify(n)&&this.setState((function(e){return{soundData:Z(n),refreshMusic:!e.refreshMusic}})),"{}"!==JSON.stringify(a)&&this.setState((function(e){return{soundData:Z(n),lightData:Z(a),refreshAnime:!e.refreshAnime}}))}},{key:"handleSocketData",value:function(e){var t="sound"in e?this.handleSoundData(e.sound):{},a="light"in e?this.handleLightData(e.light):{};return!("color"in a)&&"{}"!==JSON.stringify(a)&&"order"in t&&(a.color=X[t.order%X.length]),"color"in a&&"order"in t&&"*"==a.color&&(a.color=X[t.order%X.length]),"delay"in a&&"order"in t&&(t.delay=a.delay),"mode"in a&&"order"in t&&(t.mode=a.mode),"mode"in a&&"stop"in t&&"follow"==a.mode&&(a={}),{light:a,sound:t}}},{key:"handleSoundData",value:function(e){return Q(e.order,D)?((!Q(e.orderTo,D+1)||e.orderTo<e.order)&&(e.orderTo=e.order),e.order=e.order+Math.floor(Math.random()*(e.orderTo-e.order)),"stop"in e&&"*"===e.stop&&delete e.stop,e):"volume"in e?(delete e.order,e):{}}},{key:"handleLightData",value:function(e){return"none"===e.mode?{}:("color"in e&&"*"===e.color&&delete e.color,e.delay=Math.random()*e.delay,e)}},{key:"changeHandler",value:function(e){this.setState({opacity:e})}},{key:"render",value:function(){var e=this.state,t=e.refreshAnime,a=e.refreshMusic,n=e.lightData,i=e.soundData,r=e.opacity;return o.a.createElement("div",{id:"wrap"},o.a.createElement(f,{show:this.props.show},o.a.createElement(R,{refresh:t,data:n,opacity:r})),o.a.createElement(K,{show:this.props.show,refresh:a,data:i,onChange:this.changeHandler.bind(this),parent:this}))}}]),t}(n.Component);var ee=function(){var e=Object(n.useState)(!0),t=Object(s.a)(e,2),a=t[0],i=t[1],r=Object(n.useState)(!1),c=Object(s.a)(r,2),l=c[0],u=c[1],p=Object(n.useState)(!1),h=Object(s.a)(p,2),m=h[0],v=h[1];return o.a.createElement("div",null,o.a.createElement(f,{show:a},o.a.createElement(d,{select:function(e){i(!1),0===e?u(!0):v(!0),console.log("select: "+e)}})),o.a.createElement(f,{show:l},o.a.createElement(F,null)),o.a.createElement($,{show:m}))};r.a.render(o.a.createElement(ee,null),document.getElementById("root"))}]),[[67,1,2]]]);
//# sourceMappingURL=main.7d4c1646.chunk.js.map